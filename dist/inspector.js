function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("react-dom")),n=e(require("react-sortable-tree")),o=e(require("react-sortable-tree-theme-minimal")),r=e(require("react")),a=e(require("react-draggable")),i=r.createContext(),s=function(e){function t(t){e.call(this,t),this.state={displayObject:null}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.render=function(){var e=this;return h(i.Provider,{value:{displayObject:this.state.displayObject,selectedDisplayObject:function(t){e.setState({displayObject:t})}}},this.props.children)},t}(r.Component);function l(e){return!isNaN(parseFloat(e))&&isFinite(e)}function p(e,t){var n=null;if(t.children)for(var o=0;o<t.children.length&&!n;o++){var r=t.children[o];n=r.__inspectorId===e?r:p(e,r)}return n}function c(e,t,n){var o=e.displayObject;if(/visible/.test(t))n=event.target.checked||o.visible;else if(/scale|anchor|pivot|skew/.test(t)){var r=t.split(".");o=o[r[0]],t=r[1]}o[t]=n,e.selectedDisplayObject(e.displayObject)}var u=1,d=function(e){function t(t){var n=this;e.call(this,t),this.refresh=function(){n.setState({data:n.getHierarchy(n.props.stage)})},this.onSortChange=function(e){n.setState({data:e})},this.onMoveNode=function(e){var t=e.nextParentNode,o=n.props.stage,r=p(e.node.inspectorId,o);(t?p(t.inspectorId,o):o).addChild(r)},this.onDragDrag=function(){null===n.wasShowing&&(n.wasShowing=n.state.show),n.state.show&&n.setState({show:!1})},this.onDragStop=function(){n.wasShowing&&n.setState({show:!0}),n.wasShowing=null},this.wasShowing=null,this.state={show:!1,data:this.getHierarchy(this.props.stage)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getHierarchy=function(e){var t=this,n=[];return e.children&&e.children.forEach(function(e){e.__inspectorId||(e.__inspectorId=u++),n.push({children:t.getHierarchy(e),inspectorId:e.__inspectorId,title:h("span",null,e.name||e.toString())})}),n},t.prototype.render=function(){var e=this;return h(a,{handle:"h4",onDrag:this.onDragDrag,onStop:this.onDragStop},h("div",{className:"inspector-box",style:{left:0}},h("h4",{onDoubleClick:function(){return e.setState({show:!e.state.show})}},"Hierarchy"),h("div",{style:{display:this.state.show?"":"none"}},h("div",{style:{width:"100%",height:400,overflow:"auto"}},h(i.Consumer,null,function(t){return h(n,{className:"sortable-tree",treeData:e.state.data,onChange:e.onSortChange,generateNodeProps:function(n){var o=n.node;return{onClick:function(){var n=p(o.inspectorId,e.props.stage);t.selectedDisplayObject(n)}}},onMoveNode:e.onMoveNode,theme:o,rowHeight:24,scaffoldBlockPxWidth:12})})),h("button",{onClick:this.refresh,style:{float:"right"}},"Refresh"))))},t}(r.Component),y={},g=function(e){function t(t){var n=this;e.call(this,t),this.onKeyEvent=function(e){var t=n.context.displayObject;if(t){var o=e.key.toLowerCase();if(y[o]="keydown"===e.type,"keydown"===e.type&&y.d&&0===e.key.search(/arrow/i))e.preventDefault(),y.arrowLeft&&t.x--,y.arrowRight&&t.x--,y.arrowUp&&t.y--,y.arrowDown&&t.y++;else if("keyup"===e.type&&e.target instanceof HTMLInputElement&&/(arrowup|arrowdown)/.test(o)){e.preventDefault();var r=/arrowdown/.test(o)?-1:1,a=e.target.name,i=parseFloat(e.target.value);if(l(i)){var s=(/scale|alpha/i.test(a)?.1:1)*r;c(n.context,a,i+s)}}}},this.onWheelProperty=function(e){if(document.activeElement===e.target){var t=parseFloat(e.target.value);if(l(t)){var o=Math.sign(e.deltaY);e.ctrlKey&&(o*=10),c(n.context,e.target.name,t+o)}}},this.onChangeProperty=function(e){c(n.context,e.target.name,e.target.value)},this.state={show:!1},window.addEventListener("mousewheel",this.onWheelProperty),document.addEventListener("keydown",this.onKeyEvent),document.addEventListener("keyup",this.onKeyEvent)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.showProperties=function(e){return h("dl",null,h("dt",null,"name"),h("dd",null,h("input",{type:"text",name:"name",value:e.name||"",onChange:this.onChangeProperty})),h("dt",null,"visible"),h("dd",null,h("input",{type:"checkbox",name:"visible",checked:e.visible?"checked":"",onChange:this.onChangeProperty})),h("dt",null,"x/y/z"),h("dd",null,h("input",{type:"text",name:"x",size:"4",value:e.x,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"y",size:"4",value:e.y,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"zIndex",size:"4",value:e.zIndex,onChange:this.onChangeProperty})),h("dt",null,"scale x/y"),h("dd",null,h("input",{type:"text",name:"scale.x",size:"4",value:e.scale.x,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"scale.y",size:"4",value:e.scale.y,onChange:this.onChangeProperty})),e.anchor&&h(Fragment,null,h("dt",null,"anchor x/y"),h("dd",null,h("input",{type:"text",name:"anchor.x",size:"4",value:e.anchor.x,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"anchor.y",size:"4",value:e.anchor.y,onChange:this.onChangeProperty}))),h("dt",null,"pivot x/y"),h("dd",null,h("input",{type:"text",name:"pivot.x",size:"4",value:e.pivot.x,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"pivot.y",size:"4",value:e.pivot.y,onChange:this.onChangeProperty})),h("dt",null,"skew x/y"),h("dd",null,h("input",{type:"text",name:"skew.x",size:"4",value:e.skew.x,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"skew.y",size:"4",value:e.skew.y,onChange:this.onChangeProperty})),h("dt",null,"angle/rotation"),h("dd",null,h("input",{type:"text",name:"angle",size:"8",value:e.angle,onChange:this.onChangeProperty})," &nbsp; ",h("input",{type:"text",name:"rotation",size:"8",value:e.rotation,onChange:this.onChangeProperty})))},t.prototype.render=function(){var e=this;return h(a,{handle:"h4"},h("div",{className:"inspector-box",style:{right:0,left:null}},h("h4",{onDoubleClick:function(){return e.setState({show:!e.state.show})}},"Display Object"),h("div",{style:{display:this.state.show?"":"none"}},h(i.Consumer,null,function(t){return t&&t.displayObject?e.showProperties(t.displayObject):null}))))},t}(r.Component);g.contextType=i;var v=function(e){function t(t){e.call(this,t),this.props.pixi.Ticker.shared.add(this.update,this)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.update=function(e){},t.prototype.render=function(){return h(s,null,h(d,{stage:this.props.stage}),h(g,null))},t}(r.Component);exports.boot=function(e){void 0===e&&(e={});var n=window.PIXI;if(n||!e.pixi&&!e.PIXI||(n=e.pixi||e.PIXI),!n)throw"No PIXI?!";t.render(h(v,{pixi:n,stage:e.stage}),document.getElementById(e.inspectorId||"inspector"))};
//# sourceMappingURL=inspector.js.map
